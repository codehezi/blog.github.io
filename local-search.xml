<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>elasticsearch</title>
    <link href="/2022/08/14/elasticsearch/"/>
    <url>/2022/08/14/elasticsearch/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="docker-安装-elasticsearch-以及简单的使用"><a href="#docker-安装-elasticsearch-以及简单的使用" class="headerlink" title="docker 安装 elasticsearch 以及简单的使用"></a>docker 安装 elasticsearch 以及简单的使用</h1><h2 id="1-elasticsearch-的安装"><a href="#1-elasticsearch-的安装" class="headerlink" title="1.elasticsearch 的安装"></a>1.elasticsearch 的安装</h2><ul><li>向 docker 容器 pullelasticsearch</li></ul><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> pull elasticsearch:<span class="hljs-number">7</span>.<span class="hljs-number">7</span>.<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><ul><li>查看安装后的镜像</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">docker images</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.5rgbb4j4bmk0.webp"></p><blockquote><p>出现上图结果说明 elasticsearch 镜像已经安装完成</p></blockquote><ul><li>启动 elasticsearch 服务</li></ul><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> run --name elasticsearch -d -e ES_JAVA_OPTS=<span class="hljs-string">&quot;-Xms512m -Xmx512m&quot;</span> -e <span class="hljs-string">&quot;discovery.type=single-node&quot;</span> -p <span class="hljs-number">9200</span>:<span class="hljs-number">9200</span> -p <span class="hljs-number">9300</span>:<span class="hljs-number">9300</span> elasticsearch:<span class="hljs-number">7</span>.<span class="hljs-number">7</span>.<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.57gjis4qkdo0.webp"></p><blockquote><p>注意：这个地方的第一个端口指的是 http 外部的访问接口，第二端口指的是集群间的通信端口，使用(<a href="http://localhost:9200)访问时出现上图结果，说明">http://localhost:9200)访问时出现上图结果，说明</a> elasticsearch 服务启动成功</p></blockquote><h2 id="2-elasticsearch-的使用"><a href="#2-elasticsearch-的使用" class="headerlink" title="2.elasticsearch 的使用"></a>2.elasticsearch 的使用</h2><ul><li>（1）增加索引</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#put</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span>/test1<br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.41i07r23ncq0.webp"></p><blockquote><p>出现图中返回结果说明索引添加成功。注意：增加索引是幂等性的，需要使用 put 请求</p></blockquote><ul><li>（2）查看增加的索引</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#get</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/_cat/i</span>ndices?v<br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.697fzevfjro0.webp"></p><p>-（3）删除索引</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#delete</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span>/test1<br></code></pre></td></tr></table></figure><p>-（4）向索引中添加文档数据</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#put(1001是指定的id,是幂等性的，所以可以使用put)</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test1/</span>_doc/<span class="hljs-number">1001</span><br><br><span class="hljs-comment">#传递的参数</span><br>&#123;<br> <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;test数据&quot;</span>,<br> <span class="hljs-string">&quot;age&quot;</span>:<span class="hljs-number">12</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>（5）查询所有的添加的数据</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#get</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test/</span>_search<br></code></pre></td></tr></table></figure><ul><li>（6）根据 id 查询文档的数据</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#get</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test/</span>_doc/<span class="hljs-number">1001</span><br></code></pre></td></tr></table></figure><ul><li>（7）修改文档数据</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#put（_doc后面跟id这种是全覆盖修改，幂等性）</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test/</span>_doc/<span class="hljs-number">1001</span><br><br><span class="hljs-comment">#传递的参数</span><br>&#123;<br>    <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;覆盖&quot;</span>,<br>    <span class="hljs-string">&quot;age&quot;</span>:<span class="hljs-number">12</span>,<br>    <span class="hljs-string">&quot;test&quot;</span>:<span class="hljs-string">&quot;wq&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>（8）局部覆盖修改</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#post（_update这种是局部覆盖修改，非幂等性）</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test/</span>_update/<span class="hljs-number">1001</span><br><br><span class="hljs-comment">#传递的参数</span><br>&#123;<br>    <span class="hljs-string">&quot;doc&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;局部覆盖&quot;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>（9）删除文档数据</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#delete</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test/</span>_doc/<span class="hljs-number">1001</span><br></code></pre></td></tr></table></figure><ul><li>（10）根据条件查询文档数据</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#post</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test/</span>_search<br><br><span class="hljs-comment">#传递的参数</span><br>&#123;<br>    <span class="hljs-string">&quot;query&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;match&quot;</span>:&#123;<br>            <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;部分覆盖&quot;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">#这种是查询所有的文档数据</span><br>&#123;<br>    <span class="hljs-string">&quot;query&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;match_all&quot;</span>:&#123;<br><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>（11）分页查询</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#post</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test/</span>_search<br><br><span class="hljs-comment">#传递的参数</span><br>&#123;<br>    <span class="hljs-string">&quot;query&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;match_all&quot;</span>:&#123;<br><br>        &#125;<br>    &#125;,<br>    <span class="hljs-string">&quot;from&quot;</span>:<span class="hljs-number">0</span>,<span class="hljs-comment">#标识第几页</span><br>    <span class="hljs-string">&quot;size&quot;</span>:<span class="hljs-number">2</span><span class="hljs-comment">#表示一页展示多少数据</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>（12）查询时规定要查询的字段</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#post</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test/</span>_search<br><br><span class="hljs-comment">#传递的参数</span><br>&#123;<br>    <span class="hljs-string">&quot;query&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;match_all&quot;</span>:&#123;<br><br>        &#125;<br>    &#125;,<br>    <span class="hljs-string">&quot;from&quot;</span>:<span class="hljs-number">0</span>,<span class="hljs-comment">#标识第几页</span><br>    <span class="hljs-string">&quot;size&quot;</span>:<span class="hljs-number">2</span>,<span class="hljs-comment">#表示一页展示多少数据</span><br>    <span class="hljs-string">&quot;_source&quot;</span>:[<span class="hljs-string">&quot;name&quot;</span>] <span class="hljs-comment">#标识要查询的字段</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>（13）排序查询</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#post</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test/</span>_search<br><br><span class="hljs-comment">#传递的参数</span><br>&#123;<br>    <span class="hljs-string">&quot;query&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;match_all&quot;</span>:&#123;<br><br>        &#125;<br>    &#125;,<br>    <span class="hljs-string">&quot;from&quot;</span>:<span class="hljs-number">0</span>,<span class="hljs-comment">#标识第几页</span><br>    <span class="hljs-string">&quot;size&quot;</span>:<span class="hljs-number">2</span>,<span class="hljs-comment">#表示一页展示多少数据</span><br>    <span class="hljs-string">&quot;_source&quot;</span>:[<span class="hljs-string">&quot;name&quot;</span>], <span class="hljs-comment">#标识要查询的字段</span><br>    <span class="hljs-string">&quot;sort&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;age&quot;</span>:&#123; <span class="hljs-comment">#要排序的字段</span><br>            <span class="hljs-string">&quot;order&quot;</span>:<span class="hljs-string">&quot;asc&quot;</span> <span class="hljs-comment">#排序的规则</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>（14）条件组合查询（相当于 SQL 里面的 and）</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#post</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test/</span>_search<br><br><br><span class="hljs-comment">#传递的参数</span><br>&#123;<br>    <span class="hljs-string">&quot;query&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;bool&quot;</span>:&#123;<br>            <span class="hljs-string">&quot;must&quot;</span>:[<br>                &#123;<br>                    <span class="hljs-string">&quot;match&quot;</span>:&#123;<br>                        <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;局部覆盖&quot;</span><br>                    &#125;<br>                &#125;,<br>                &#123;<br>                    <span class="hljs-string">&quot;match&quot;</span>:&#123;<br>                        <span class="hljs-string">&quot;age&quot;</span>:<span class="hljs-number">12</span><br>                    &#125;<br>                &#125;<br>            ]<br>        &#125;<br>    &#125;,<br>    <span class="hljs-string">&quot;from&quot;</span>:<span class="hljs-number">0</span>,<span class="hljs-regexp">//</span>从某页开始<br>    <span class="hljs-string">&quot;size&quot;</span>:<span class="hljs-number">5</span><span class="hljs-regexp">//</span>每页查询多少条<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>（14）条件组合查询（相当于 SQL 里面的 or）</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#post</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test/</span>_search<br><br><span class="hljs-comment">#传递的参数</span><br>&#123;<br>    <span class="hljs-string">&quot;query&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;bool&quot;</span>:&#123;<br>            <span class="hljs-string">&quot;should&quot;</span>:[<br>                &#123;<br>                    <span class="hljs-string">&quot;match&quot;</span>:&#123;<br>                        <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;局部覆盖&quot;</span><br>                    &#125;<br>                &#125;,<br>                &#123;<br>                    <span class="hljs-string">&quot;match&quot;</span>:&#123;<br>                        <span class="hljs-string">&quot;age&quot;</span>:<span class="hljs-number">12</span><br>                    &#125;<br>                &#125;<br>            ]<br>        &#125;<br>    &#125;,<br>    <span class="hljs-string">&quot;from&quot;</span>:<span class="hljs-number">0</span>,<span class="hljs-regexp">//</span>从某页开始<br>    <span class="hljs-string">&quot;size&quot;</span>:<span class="hljs-number">5</span><span class="hljs-regexp">//</span>每页查询多少条<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>（15）文档范围查询</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#post</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test/</span>_search<br><br><br><span class="hljs-comment">#传递的参数</span><br>&#123;<br>    <span class="hljs-string">&quot;query&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;bool&quot;</span>:&#123;<br>           <span class="hljs-string">&quot;filter&quot;</span>:&#123;<br>               <span class="hljs-string">&quot;range&quot;</span>:&#123;<br>                   <span class="hljs-string">&quot;age&quot;</span>:&#123;<br>                       <span class="hljs-string">&quot;gt&quot;</span>:<span class="hljs-number">11</span><br>                   &#125;<br>               &#125;<br>           &#125;<br>        &#125;<br>    &#125;,<br>    <span class="hljs-string">&quot;from&quot;</span>:<span class="hljs-number">0</span>,<span class="hljs-regexp">//</span>从某页开始<br>    <span class="hljs-string">&quot;size&quot;</span>:<span class="hljs-number">5</span><span class="hljs-regexp">//</span>每页查询多少条<br>&#125;<br><br></code></pre></td></tr></table></figure><ul><li>（16）文档查询结果高亮显示</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#post</span><br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">9200</span><span class="hljs-regexp">/test/</span>_search<br><br><span class="hljs-comment">#传递的参数</span><br>&#123;<br>    <span class="hljs-string">&quot;query&quot;</span>:&#123;<br>       <span class="hljs-string">&quot;match_phrase&quot;</span>:&#123;<br>           <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;局部&quot;</span><br>       &#125;<br>    &#125;,<br>    <span class="hljs-string">&quot;highlight&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;fields&quot;</span>:&#123;<br>            <span class="hljs-string">&quot;name&quot;</span>:&#123;&#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>elasticsearch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>elasticsearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python</title>
    <link href="/2022/08/07/python/"/>
    <url>/2022/08/07/python/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="python-整合-redis-的简单使用"><a href="#python-整合-redis-的简单使用" class="headerlink" title="python 整合 redis 的简单使用"></a>python 整合 redis 的简单使用</h1><ul><li><strong>1.安装 redis 要使用的模块</strong></li></ul><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> redis<br><br>pip <span class="hljs-keyword">install</span> python-redis<br></code></pre></td></tr></table></figure><ul><li>2.<strong>在项目中导入 redis 的模块</strong></li></ul><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-keyword">import</span> redis<br></code></pre></td></tr></table></figure><ul><li>3.<strong>配置 redis 的连接</strong></li></ul><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs clean"># 两种配置方式都可以使用<br><span class="hljs-keyword">import</span> redis<br><br>kwargs = &#123;<br>    <span class="hljs-string">&#x27;host&#x27;</span>: ip,<br>    <span class="hljs-string">&#x27;port&#x27;</span>: <span class="hljs-number">6379</span>,<br>    <span class="hljs-string">&#x27;decode_responses&#x27;</span>: <span class="hljs-literal">True</span>,<br>    <span class="hljs-string">&#x27;retry_on_timeout&#x27;</span>: <span class="hljs-number">3</span>, #重试次数<br>    <span class="hljs-string">&#x27;max_connections&#x27;</span>: <span class="hljs-number">1024</span>  # 默认<span class="hljs-number">2</span>^<span class="hljs-number">31</span><br>&#125;<br><br>pool = redis.ConnectionPool(**kwargs)<br>r = redis.Redis(connection_pool=pool)<br>r.flushdb<br># pool = redis.ConnectionPool(decode_responses=<span class="hljs-literal">True</span>)                   # 建立连接池<br># r = redis.Redis(connection_pool=pool,host=ip, port=<span class="hljs-number">6379</span>)   # 从连接池获取连接<br><br></code></pre></td></tr></table></figure><ul><li>4.<strong>以爬取百度的图片为演示列子</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> data <span class="hljs-keyword">import</span> redisDB <span class="hljs-comment">#这个是上面配置封装的模块</span><br><br>keywords = <span class="hljs-string">&quot;风景图片自然&quot;</span>;<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getImages</span>():<br>    url = <span class="hljs-string">f&#x27;https://image.baidu.com/search/index?ct=201326592&amp;tn=baiduimage&amp;word=<span class="hljs-subst">&#123;keywords&#125;</span>&amp;pn=&amp;spn=&amp;ie=utf-8&amp;oe=utf-8&amp;cl=2&amp;lm=-1&amp;fr=ala&amp;se=&amp;sme=&amp;cs=&amp;os=&amp;objurl=&amp;di=&amp;tt=&amp;gsm=5a&amp;dyTabStr=MCwzLDIsNiwxLDQsNSw3LDgsOQ%3D%3D&#x27;</span><br>    headers = &#123;<br>        <span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#x27;</span>,<br>        <span class="hljs-string">&#x27;user-agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36&#x27;</span><br>    &#125;<br>    response = requests.get(url=url, headers=headers, timeout=<span class="hljs-number">5</span>)<br>    content = re.findall(<span class="hljs-string">&quot;&#x27;imgData&#x27;,(.*?),&#123;&#125;]&#125;&quot;</span>, response.text)[<span class="hljs-number">0</span>] + <span class="hljs-string">&quot;,&#123;&#125;]&#125;&quot;</span><br>    jsonObj = json.loads(content)[<span class="hljs-string">&#x27;data&#x27;</span>]<br>    <span class="hljs-keyword">for</span> image <span class="hljs-keyword">in</span> jsonObj:<br>        <span class="hljs-keyword">try</span>:<br>            num = image[<span class="hljs-string">&#x27;thumbURL&#x27;</span>].split(<span class="hljs-string">&#x27;,&#x27;</span>)[<span class="hljs-number">0</span>].split(<span class="hljs-string">&#x27;=&#x27;</span>)[<span class="hljs-number">1</span>]<br>            redisDB.r.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;image:&quot;</span>+num,image[<span class="hljs-string">&#x27;thumbURL&#x27;</span>])<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;图片不存在&quot;</span>)<br></code></pre></td></tr></table></figure><blockquote><p>操作的结果</p></blockquote><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.55uclnbxhmk0.webp"></p><blockquote><p>每个 url 都是一张图片（图中的连接如下图，这个 url 可能时刻在变化）</p></blockquote><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.11vxtw1coffk.webp"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tabby</title>
    <link href="/2022/07/27/tabby/"/>
    <url>/2022/07/27/tabby/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="性能强大且优雅的远程连接工具-tabby"><a href="#性能强大且优雅的远程连接工具-tabby" class="headerlink" title="性能强大且优雅的远程连接工具 tabby"></a><a href="https://github.com/Eugeny/tabby/releases/tag/v1.0.164">性能强大且优雅的远程连接工具 tabby</a></h1><blockquote><p>点击名称可跳转 GitHub 下载各个版本的安装包</p></blockquote><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.243361vn98kg.webp"></p><ul><li><p>windows 版的安装程序，下载双击直接下一步安装即可</p></li><li><p>安装完成</p><ul><li><p>设置步骤</p><ul><li><p>(1)<br><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.5mftv62bmq40.webp"></p></li><li><p>(2)<br><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.6ml87xubf4w0.webp"></p></li><li><p>(3)<br><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.387c79fg348.webp"></p></li><li><p>(4)<br><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.5ya6fngeyd40.webp"></p></li><li><p>(5)<br><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.5ya6fngeyd40.webp"></p></li><li><p>(7)<br><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.7987qiwxqhw0.webp"></p></li><li><p>(6)<br><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.6mrx9dj2nhk0.webp"></p></li><li><p>(7)<br><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.6mrx9dj2nhk0.webp"></p></li><li><p>(8)<br><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.68w7vxdwz9o0.webp"></p></li><li><p>(9)<br><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.5walfnk96ok0.webp"></p></li></ul><blockquote><p>至此，安装和配置远程服务器完毕</p></blockquote></li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>tabby</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tabby</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>liunx磁盘扩容</title>
    <link href="/2022/07/24/liunx-kuorong/"/>
    <url>/2022/07/24/liunx-kuorong/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>今天在用 liunx 下载插件的时候突然报磁盘空间不足，之后不管是切换目录，关机重启什么的，都没办法使用，之后使用”rm -f xxx”到指定的文件下删除一些日志后，释放了一些空间才可以正常使用，但是这个并不能管多久，稍微使用一下日志记多了空间就又开始不足了，后来就去网上查了下，原来是一开始没做分区，分配的 60 多个 G 并没有给根目录。下面就来做来分区给根目录扩个容。</p></blockquote><ul><li>首先查看下磁盘的情况</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#查看当前磁盘的使用情况</span><br><span class="hljs-built_in">df</span> -h<br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.5zl59b2z23g0.webp"></p><ul><li>看下分区情况</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">fdisk -l</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.6phzsa8p0480.webp"></p><blockquote><p>从图中明显可以看出这个默认分配的空间只有十几个 G，而我在虚拟机中设置的是 90G,显然我还有很多空间是没有用到的</p></blockquote><ul><li>首先对磁盘进行分区</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">fdisk <span class="hljs-regexp">/dev/</span>sda<br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.5y3s11gfr7w0.webp"></p><ul><li>分完区查看一下分区的情况</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">fdisk -l</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.38l1lop40mw0.webp"></p><blockquote><p>发现这里多出一个 sda3 的区</p></blockquote><ul><li>创建物理卷</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">pvcreate <span class="hljs-regexp">/dev/</span>sda3<br></code></pre></td></tr></table></figure><blockquote><p>这个地方可能会报错，报 Device not found:/dev/sda3 ,这个时候可以将 liunx 重启一下，一般不会报错。</p></blockquote><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.39pwnkdmdbs0.webp"></p><blockquote><p>创建成功了就会如上图显示成功，同时查看了物理卷的信息，出现了新增的 sda3</p></blockquote><ul><li>查看当前物理卷的使用情况</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">vgdisplay</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.2h594oxdzyq0.webp"></p><ul><li>把创建的这个物理卷加进来</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#加上新加的卷</span><br>vgextend <span class="hljs-regexp">/dev/</span>centos<span class="hljs-regexp">/ /</span>dev/sda3<br><br><span class="hljs-comment">#展示当前卷的情况</span><br>vgdisplay<br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.26vmb708mjvo.webp"></p><ul><li>查看一下新加卷</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pvdisplay</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.18r6ky8ggujk.webp"></p><ul><li>给更目录 root 分配空间</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">lvextent -L+<span class="hljs-number">1</span>G <span class="hljs-regexp">/dev/</span>centos<span class="hljs-regexp">/root /</span>dev/sda3<br><br> resize2fs -p <span class="hljs-regexp">/dev/m</span>apper/centos-root <span class="hljs-number">10</span>G<br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.59yfu3e5ei80.webp"></p><blockquote><p>如果报了图片中的错误可以使用下面的命令</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#查看磁盘情况</span><br><span class="hljs-built_in">df</span> -h<br><br>xfs_growfs /dev/mapper/centos-root<br><br><span class="hljs-comment">#再次查看磁盘</span><br><span class="hljs-built_in">df</span> -h<br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.5zoe8ezoqnk0.webp"></p><blockquote><p>下面磁盘空间变化了，说明扩容好了</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>liunx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>liunx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>springboot项目改造成dubbo微服务项目</title>
    <link href="/2022/07/22/dubbo/"/>
    <url>/2022/07/22/dubbo/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="将一个普通的-springboot-微服务改造成-dubbo-的微服务"><a href="#将一个普通的-springboot-微服务改造成-dubbo-的微服务" class="headerlink" title="将一个普通的 springboot 微服务改造成 dubbo 的微服务"></a><font color=red>将一个普通的 springboot 微服务改造成 dubbo 的微服务</font></h1><h4 id="首先搭建-springboot-的微服务项目，直接上代码"><a href="#首先搭建-springboot-的微服务项目，直接上代码" class="headerlink" title="首先搭建 springboot 的微服务项目，直接上代码"></a>首先搭建 springboot 的微服务项目，直接上代码</h4><blockquote><p>目录结构</p></blockquote><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.1sxuhy6ipfz4.webp"></p><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.7jbn8mp2onc0.webp"></p><ul><li>consumer 服务的 service 层</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">consumerService</span> &#123;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">RestTemplate</span> restTemplate;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getOrder</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">String</span> result = restTemplate.<span class="hljs-title function_">getForObject</span>(<span class="hljs-string">&quot;http://localhost:8082/provider&quot;</span>, <span class="hljs-title class_">String</span>.<span class="hljs-property">class</span>);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>consumer 服务的 Controller 层</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">consumerController</span> &#123;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> consumerService consumerService;<br><br>    <span class="hljs-meta">@GetMapping(<span class="hljs-string">&quot;/consumer&quot;</span>)</span><br>    <span class="hljs-keyword">public</span> String consumer()&#123;<br>        <span class="hljs-keyword">return</span> consumerService.getOrder();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>consumer 的 pom</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.codehezi.consumer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>consumer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.6.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>provider 应用的 service 层</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">providerService</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getProvider</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>provider 应用的 Controller 层</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">providerController</span> &#123;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> providerService providerService;<br><br>    <span class="hljs-meta">@GetMapping(<span class="hljs-string">&quot;/provider&quot;</span>)</span><br>    <span class="hljs-keyword">public</span> String getProvider() &#123;<br>        <span class="hljs-keyword">return</span> providerService.getProvider();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>provider 的 pom</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.codehezi.provider<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>provider<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.6.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="在没使用-dubbo-之前使用-RestTemplate-去调用-provider-的应用"><a href="#在没使用-dubbo-之前使用-RestTemplate-去调用-provider-的应用" class="headerlink" title="在没使用 dubbo 之前使用 RestTemplate 去调用 provider 的应用"></a>在没使用 dubbo 之前使用 RestTemplate 去调用 provider 的应用</h2><ul><li><p>1.添加 dubbo 的核心依赖</p></li><li><p>2.添加要使用的注册中心的依赖</p></li><li><p>3.添加要使用的协议的依赖</p></li><li><p>4.配置 dubbo 的基本信息</p></li><li><p>5.配置注册中心的地址</p></li><li><p>6.配置要使用的协议</p></li></ul><h2 id="改造成-dubbo-的微服务"><a href="#改造成-dubbo-的微服务" class="headerlink" title="改造成 dubbo 的微服务"></a>改造成 dubbo 的微服务</h2><ul><li>pom 文件调整，这里用了 dubbo3.0.7，发现自带的 Zookeper 版本过低，需要引入 Zookeper 的版本</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- dubbo依赖--&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.dubbo<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.dubbo<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dubbo-rpc-dubbo<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.dubbo<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dubbo-registry-zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><br>     <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.dubbo<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dubbo-dependencies-zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-log4j12<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>consumer 应用的配置</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8081</span><br><br><span class="hljs-comment">#dubbo应用的配置</span><br><span class="hljs-attr">dubbo:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">consumer-application</span><br>  <span class="hljs-attr">protocol:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">dubbo</span>   <span class="hljs-comment">#dubbo协议的名称</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">20880</span>   <span class="hljs-comment">#dubbo协议的端口</span><br><br>  <span class="hljs-attr">registry:</span><br>    <span class="hljs-attr">address:</span> <span class="hljs-string">zookeeper://192.168.136.20:2181</span>  <span class="hljs-comment">#Zookeper注册中心的地址</span><br></code></pre></td></tr></table></figure><ul><li>providder 应用的配置</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8082</span><br><span class="hljs-comment">#dubbo应用的配置</span><br><span class="hljs-attr">dubbo:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">provider-application</span><br>  <span class="hljs-attr">protocol:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">dubbo</span>   <span class="hljs-comment">#dubbo协议的名称</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">20880</span>   <span class="hljs-comment">#dubbo协议的端口</span><br><br>  <span class="hljs-attr">registry:</span><br>    <span class="hljs-attr">address:</span> <span class="hljs-string">zookeeper://192.168.136.20:2181</span>  <span class="hljs-comment">#Zookeper注册中心的地址</span><br></code></pre></td></tr></table></figure><blockquote><p>注意：这里需要启动 Zookeper 的服务端</p></blockquote><h2 id="改造-consumer-应用和-provider-应用"><a href="#改造-consumer-应用和-provider-应用" class="headerlink" title="改造 consumer 应用和 provider 应用"></a>改造 consumer 应用和 provider 应用</h2><ul><li>增加接口 moudle</li></ul><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.xd2w0dgua40.webp"></p><h3 id="consumer-应用调整"><a href="#consumer-应用调整" class="headerlink" title="consumer 应用调整"></a>consumer 应用调整</h3><ul><li>调整 pom，引入 common 模块</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"> <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.codehezi.common<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>common<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>调整 consumer 的 service</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">consumerService</span> &#123;<br><br>    <span class="hljs-meta">@DubboReference</span> <span class="hljs-comment">//使用dubbo注解</span><br>    <span class="hljs-keyword">private</span> com.<span class="hljs-property">codehezi</span>.<span class="hljs-property">providerService</span>.<span class="hljs-property">providerService</span> providerService;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getOrder</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> providerService.<span class="hljs-title function_">getProvider</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>启动类开启 dubbo 功能</p><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.hs4pjoeywa0.webp"></p></li></ul><h3 id="调整-provider-应用"><a href="#调整-provider-应用" class="headerlink" title="调整 provider 应用"></a>调整 provider 应用</h3><ul><li>调整 pom，引入 common 模块</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.codehezi.common<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>common<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>调整 provider 的原来的 service 为实现类</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@DubboService</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">providerServiceImpl</span> <span class="hljs-keyword">implements</span> providerService &#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getProvider</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>启动类开启 dubbo 功能</p><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.3j1yq9x6f3e0.webp"></p></li></ul><blockquote><p>到这里一个 dubbo 的微服务项目改造就完成了</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>windows安装hexo静态博客</title>
    <link href="/2022/07/22/hexo/"/>
    <url>/2022/07/22/hexo/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="windows搭建静态博客"><a href="#windows搭建静态博客" class="headerlink" title="windows搭建静态博客"></a>windows搭建静态博客</h3><blockquote><p>安装环境</p><ul><li>(1)安装了node的环境，并且版本在14.0.1或者以上</li><li>(2)安装了Git环境</li><li>(3)搭建hexo静态博客</li><li>(4)注册了GitHub账号，便于后面代码托管</li></ul></blockquote><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-meta">#安装hexo的命令行</span><br>npm install -g hexo-<span class="hljs-keyword">cli</span><br><br></code></pre></td></tr></table></figure><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">##检查hexo是否安装完成<br>hexo -v<br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.50g2wdtujgo0.webp"></p><blockquote><p>出现这样的输出说明hexo安装完成了</p></blockquote><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-meta">#在任意一磁盘下加一个文件夹，如：blogtest，在此文件夹下初始化</span><br>hexo <span class="hljs-keyword">init</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.7jgrkbc5xcs0.webp"></p><blockquote><p>出现此图说明已经初始化完成</p></blockquote><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#下载hexo需要的一些依赖</span><br>npm <span class="hljs-keyword">install</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.7i5b0lwmsog0.webp"></p><blockquote><p>出现这个文件夹说明依赖已经下载完</p></blockquote><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment">#先清理一下</span><br><span class="hljs-attribute">hexo</span> clean<br> <br><span class="hljs-comment">#生成静态文件</span><br>hexo g<br><br><span class="hljs-comment">#启动hexo服务</span><br>hexo s<br><br><span class="hljs-comment">#发布到GitHub</span><br>hexo d<br></code></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/codehezi/rest@master/images/image.45b9j5qn4n80.webp"></p><blockquote><p>出现这个图说明hexo的静态博客已经搭建成功</p></blockquote>]]></content>
    
    
    
    <tags>
      
      <tag>windows</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>linux安装git</title>
    <link href="/2022/07/20/git/"/>
    <url>/2022/07/20/git/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="liunx安装git"><a href="#liunx安装git" class="headerlink" title="liunx安装git"></a>liunx安装git</h3><blockquote><p>git管理codeing的版本需要git版本至少是1.8.0以上</p></blockquote><h2 id="安装git的依赖"><a href="#安装git的依赖" class="headerlink" title="安装git的依赖"></a><em>安装git的依赖</em></h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker<br></code></pre></td></tr></table></figure><h2 id="删除已有的git，这个版本默认是1-8-0左右的"><a href="#删除已有的git，这个版本默认是1-8-0左右的" class="headerlink" title="删除已有的git，这个版本默认是1.8.0左右的"></a><em>删除已有的git，这个版本默认是1.8.0左右的</em></h2><blockquote><p>yum remove git</p></blockquote><h1 id="下载git源码"><a href="#下载git源码" class="headerlink" title="下载git源码"></a>下载git源码</h1><h2 id="进入下载的目录在（以-usr-local-git-目录为例）"><a href="#进入下载的目录在（以-usr-local-git-目录为例）" class="headerlink" title="进入下载的目录在（以 /usr/local/git 目录为例）"></a><em>进入下载的目录在（以 /usr/local/git 目录为例）</em></h2><blockquote><p>wget <a href="https://www.kernel.org/pub/software/scm/git/git-2.8.3.tar.gz">https://www.kernel.org/pub/software/scm/git/git-2.8.3.tar.gz</a></p></blockquote><h2 id="将下载的压缩包解压"><a href="#将下载的压缩包解压" class="headerlink" title="将下载的压缩包解压"></a><em>将下载的压缩包解压</em></h2><blockquote><p>tar -zxvf git-2.8.3.tar.gz</p></blockquote><h2 id="进到解压后的目录配置Git的安装路径"><a href="#进到解压后的目录配置Git的安装路径" class="headerlink" title="进到解压后的目录配置Git的安装路径"></a><em>进到解压后的目录配置Git的安装路径</em></h2><blockquote><p>./configure prefix=/usr/local/git/</p></blockquote><h2 id="编译并且安装"><a href="#编译并且安装" class="headerlink" title="编译并且安装"></a><em>编译并且安装</em></h2><blockquote><p>make &amp;&amp; make install</p></blockquote><h2 id="然后可以查看下Git的版本"><a href="#然后可以查看下Git的版本" class="headerlink" title="然后可以查看下Git的版本"></a><em>然后可以查看下Git的版本</em></h2><blockquote><p>git –version</p></blockquote><h2 id="将git指令添加到-etc-profile-中"><a href="#将git指令添加到-etc-profile-中" class="headerlink" title="将git指令添加到 /etc/profile 中"></a><em>将git指令添加到 /etc/profile 中</em></h2><p>#在这个文件的后面加上</p><blockquote><p>export PATH=$PATH:/usr/local/git/bin</p></blockquote><h2 id="执行命令是的文件生效"><a href="#执行命令是的文件生效" class="headerlink" title="执行命令是的文件生效"></a><em>执行命令是的文件生效</em></h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">source</span> <span class="hljs-regexp">/etc/</span>profile<br></code></pre></td></tr></table></figure><blockquote><p>linux的git安装成功</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>liunx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>liunx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>liunx安装docker容器</title>
    <link href="/2022/07/19/linux/"/>
    <url>/2022/07/19/linux/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="liunx安装docker容器"><a href="#liunx安装docker容器" class="headerlink" title="liunx安装docker容器"></a>liunx安装docker容器</h3><h2 id="（1）先查看一下操作系统的版本"><a href="#（1）先查看一下操作系统的版本" class="headerlink" title="（1）先查看一下操作系统的版本"></a>（1）先查看一下操作系统的版本</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">username -r</span><br></code></pre></td></tr></table></figure><h2 id="（2）如果版本低于3-10，需要更新版本"><a href="#（2）如果版本低于3-10，需要更新版本" class="headerlink" title="（2）如果版本低于3.10，需要更新版本"></a>（2）如果版本低于3.10，需要更新版本</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">yum update</span><br></code></pre></td></tr></table></figure><h2 id="（3）下载yum命令需要用到的工具"><a href="#（3）下载yum命令需要用到的工具" class="headerlink" title="（3）下载yum命令需要用到的工具"></a>（3）下载yum命令需要用到的工具</h2><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">yum</span> install -y yum-utils device-mapper-persistent-<span class="hljs-class"><span class="hljs-keyword">data</span> lvm2</span><br></code></pre></td></tr></table></figure><h2 id="（4）配置docker下载的镜像，不然下载会很慢"><a href="#（4）配置docker下载的镜像，不然下载会很慢" class="headerlink" title="（4）配置docker下载的镜像，不然下载会很慢"></a>（4）配置docker下载的镜像，不然下载会很慢</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>官网地址<br>yum-config-manager --add-repo https:<span class="hljs-regexp">//</span>download.docker.com<span class="hljs-regexp">/linux/</span>centos/docker-ce.repo<br><span class="hljs-regexp">//</span>阿里云地址<br>yum-config-manager --add-repo http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/docker-ce/</span>linux<span class="hljs-regexp">/centos/</span>docker-ce.repo<br></code></pre></td></tr></table></figure><h2 id="（6）查看docker版本列表，选择要下载的版本"><a href="#（6）查看docker版本列表，选择要下载的版本" class="headerlink" title="（6）查看docker版本列表，选择要下载的版本"></a>（6）查看docker版本列表，选择要下载的版本</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">yum <span class="hljs-keyword">list</span> docker-<span class="hljs-keyword">ce</span> --showduplicates | <span class="hljs-keyword">sort</span> -r<br></code></pre></td></tr></table></figure><h2 id="（7）安装docker"><a href="#（7）安装docker" class="headerlink" title="（7）安装docker"></a>（7）安装docker</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">yum</span> install docker-ce-<span class="hljs-number">17</span>.<span class="hljs-number">12</span>.<span class="hljs-number">0</span>.ce <br></code></pre></td></tr></table></figure><h2 id="（8）查看docker版本，看是否安装成功"><a href="#（8）查看docker版本，看是否安装成功" class="headerlink" title="（8）查看docker版本，看是否安装成功"></a>（8）查看docker版本，看是否安装成功</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>查看版本<br>docker version<br><br><span class="hljs-regexp">//</span>验证是否安装成功<br><span class="hljs-number">1</span>.systemctl start dokcer  <span class="hljs-regexp">//</span>启动docker容器<br><br><span class="hljs-number">2</span>.systemctl enable docker <span class="hljs-regexp">//</span>设置docker容器开机自启动<br><br><span class="hljs-number">3</span>.docker version(如果出现客户端和服务端说明安装docker成功了)<br><br><span class="hljs-regexp">//</span>查看docker的启动状态<br>systemctl status docker<br></code></pre></td></tr></table></figure><h2 id="（9）卸载docker"><a href="#（9）卸载docker" class="headerlink" title="（9）卸载docker"></a>（9）卸载docker</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>查询docker安装过的包<br>yum list installed | grep docker<br><br><span class="hljs-regexp">//</span>删除安装包<br>yum remove docker-ce.x86_64 ddocker-ce-cli.x86_64 -y<br><br><span class="hljs-regexp">//</span>删除镜像/容器等<br>rm -rf <span class="hljs-regexp">/var/</span>lib/docker<br></code></pre></td></tr></table></figure><h2 id="（10）查看docker里面镜像的运行情况"><a href="#（10）查看docker里面镜像的运行情况" class="headerlink" title="（10）查看docker里面镜像的运行情况"></a>（10）查看docker里面镜像的运行情况</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker ps <span class="hljs-regexp">//</span>查看正在运行的镜像<br><br>docker ps -a <span class="hljs-regexp">//</span>查看所有的镜像<br></code></pre></td></tr></table></figure><h2 id="（11）关闭运行的镜像和docker容器"><a href="#（11）关闭运行的镜像和docker容器" class="headerlink" title="（11）关闭运行的镜像和docker容器"></a>（11）关闭运行的镜像和docker容器</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino">docker stop 镜像的id或者镜像名称 <span class="hljs-comment">//关闭运行的镜像</span><br><br>systemctl stop docker <span class="hljs-comment">//停止正在运行的容器</span><br></code></pre></td></tr></table></figure><h2 id="一些docker查看的参数"><a href="#一些docker查看的参数" class="headerlink" title="一些docker查看的参数"></a>一些docker查看的参数</h2><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs diff">docker ps [OPTIONS]<br><br>OPTIONS说明：<br><span class="hljs-deletion">-a :显示所有的容器，包括未运行的。</span><br><span class="hljs-deletion">-f :根据条件过滤显示的内容。</span><br><span class="hljs-deletion">--format :指定返回值的模板文件。</span><br><span class="hljs-deletion">-l :显示最近创建的容器。</span><br><span class="hljs-deletion">-n :列出最近创建的n个容器。</span><br><span class="hljs-deletion">--no-trunc :不截断输出。</span><br><span class="hljs-deletion">-q :静默模式，只显示容器编号。</span><br><span class="hljs-deletion">-s :显示总的文件大小。</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>liunx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>liunx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>node的版本管理工具</title>
    <link href="/2022/07/19/node/"/>
    <url>/2022/07/19/node/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="node的版本管理工具"><a href="#node的版本管理工具" class="headerlink" title="node的版本管理工具"></a>node的版本管理工具</h3><h1 id="（1）如果已经安装了node，可以通过npm命令直接安装"><a href="#（1）如果已经安装了node，可以通过npm命令直接安装" class="headerlink" title="（1）如果已经安装了node，可以通过npm命令直接安装"></a>（1）如果已经安装了node，可以通过npm命令直接安装</h1><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment">#这个安装的是windows版本</span><br>npm <span class="hljs-keyword">install </span>-g nvmw <br><span class="hljs-comment">#查看nvmw的版本，看是否安装成功</span><br>nvmw -V <span class="hljs-comment">##注意：这个V是大写</span><br><span class="hljs-comment">#然后可以通过nvmw命令安装node的版本（版本需要是5.0.0以上的）</span><br>列如：nvmw <span class="hljs-keyword">install </span>v14.<span class="hljs-number">0</span>.<span class="hljs-number">1</span><br><span class="hljs-comment">#可以在当前窗口切换node的版本</span><br>nvmw use v14.<span class="hljs-number">0</span>.<span class="hljs-number">1</span> <span class="hljs-title">||</span> nvmw <span class="hljs-keyword">switch </span>v14.<span class="hljs-number">0</span>.<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
    <tags>
      
      <tag>node</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
